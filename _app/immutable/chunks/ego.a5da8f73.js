import{i as w,S as f}from"./store.bb311651.js";const l="https://api.ergoplatform.com/api/v1";async function E(r){try{const e=await fetch(`${l}/boxes/unspent/byAddress/${r}`);if(!e.ok)throw new Error(`API request failed: ${e.status}`);return(await e.json()).items||[]}catch(e){throw console.error(`Error fetching boxes for address ${r}:`,e),new Error("Failed to fetch boxes from explorer API")}}async function m(r){try{const e=await fetch(`${l}/addresses/${r}/balance/confirmed`);if(!e.ok)throw new Error(`API request failed: ${e.status}`);return await e.json()}catch(e){throw console.error(`Error fetching balance for address ${r}:`,e),new Error("Failed to fetch address balance")}}async function y(){try{return(await m(w)).nanoErgs}catch(r){return console.error("Error fetching treasury balance:",r),0}}async function b(){try{const r=await fetch(`${l}/networkState`);if(!r.ok)throw new Error(`API request failed: ${r.status}`);return await r.json()}catch(r){throw console.error("Error fetching network state:",r),new Error("Failed to fetch network state")}}async function k(r){try{return(await E(f)).filter(o=>{var n;const t=(n=o.additionalRegisters)==null?void 0:n.R4;if(!t)return!1;try{return t.includes(r)}catch(u){return console.error("Error parsing register:",u),!1}}).map(o=>{var t,n;return{tokenId:o.boxId,amount:((t=o.assets[0])==null?void 0:t.amount)||0,owner:r,metadata:{name:"EGO Token",description:"Soulbound reputation token",score:((n=o.assets[0])==null?void 0:n.amount)||0}}})}catch(e){return console.error(`Error fetching EGO tokens for address ${r}:`,e),[]}}async function x(r=10){var e,i,o,t;try{const n=await E(f),u=new Map;for(const s of n){const c=(e=s.additionalRegisters)==null?void 0:e.R4;if(c)try{const a=c;u.has(a)||u.set(a,[]);const d={tokenId:s.boxId,amount:((i=s.assets[0])==null?void 0:i.amount)||0,owner:a,metadata:{name:"EGO Token",description:"Soulbound reputation token",score:((o=s.assets[0])==null?void 0:o.amount)||0}};(t=u.get(a))==null||t.push(d)}catch(a){console.error("Error parsing box for leaderboard:",a);continue}}const g=[];for(const[s,c]of u){const a=c.reduce((d,h)=>d+h.amount,0);g.push({address:s,totalEgo:a,tokens:c})}return g.sort((s,c)=>c.totalEgo-s.totalEgo).slice(0,r)}catch(n){return console.error("Error fetching EGO leaderboard:",n),[]}}async function A(){try{return(await E(f)).reduce((e,i)=>{var t;const o=((t=i.assets[0])==null?void 0:t.amount)||0;return e+o},0)}catch(r){return console.error("Error fetching total EGO minted:",r),0}}export{A as a,b,E as c,x as d,k as e,y as g};
